<div class="container p-4">
  <div class="row justify-content-center">
    <h1>Agregar Nuevo Equipo CPE</h1>
  </div>

  <div class="row justify-content-center mt-4">
    <div class="col-md-6">

      {{!-- Mostrar errores si existen --}}
      {{#if errors}}
        <div class="alert alert-danger">
          <ul>
            {{#each errors}}
              <li>{{this.msg}}</li>
            {{/each}}
          </ul>
        </div>
      {{/if}}

      {{!-- Formulario para agregar un nuevo equipo CPE --}}
      <form method="POST" action="/equipos/new" enctype="multipart/form-data" id="alertFormSave">

        {{!-- <div class="form-group">
          <label for="hash">Hash del Equipo</label>
          <input type="text" class="form-control" name="hash" id="hash" placeholder="Hash" value="" required>
        </div> --}}

        <div class="form-group">
          <label for="nombre_equipo">Nombre del Equipo</label>
          <input type="text" class="form-control" name="nombre_equipo" id="nombre_equipo" placeholder="Nombre del Equipo" value="" required autofocus>
        </div>

        <div class="form-group">
          <label for="marca">Marca</label>
          <input type="text" class="form-control" name="marca" id="marca" placeholder="Marca" value="" required>
        </div>

        <div class="form-group">
          <label for="tipo">Tipo</label>
          <select class="form-control" name="tipo" id="tipo" required>
            <option value="ANTENA">Antena</option>
            <option value="ROUTER">Router</option>
          </select>
        </div>

        <div class="form-group">
          <label for="descripcion">Descripción</label>
          <textarea class="form-control" name="descripcion" id="descripcion" placeholder="Descripción" rows="3" required></textarea>
        </div>

        <div class="form-group">
          <label for="img_equipo">Subir Imagen del Equipo</label>
          <input type="file" class="form-control-file" name="img_equipo" id="img_equipo" accept="image/png, image/jpeg, image/webp" required>
        </div>

        <!-- Contenedor para la vista previa de la imagen seleccionada -->
        <div class="form-group" id="imagePreview" style="display: none;">
          <label>Vista Previa de la Imagen:</label><br>
          <img id="previewImage" src="#" alt="Vista Previa" style="max-width: 50%; height: auto;">
        </div>

        <div class="form-group row">
          <div class="col-6 pl-1">
            <a href="/equipos" class="btn btn-secondary btn-block">Cancelar</a> <!-- Botón para cancelar -->
          </div>
          <div class="col-6 pr-1">
           <button class="btn btn-success btn-block" type="submit">Agregar Equipo CPE</button>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>

<!-- JavaScript para la vista previa de la imagen seleccionada -->
<script>
  // JavaScript para mostrar la vista previa de la imagen seleccionada
  document.getElementById('img_equipo').addEventListener('change', function(event) {
    const [file] = event.target.files;
    if (file) {
      const previewContainer = document.getElementById('imagePreview');
      const previewImage = document.getElementById('previewImage');
      previewImage.src = URL.createObjectURL(file);
      previewContainer.style.display = 'block';
    } else {
      // Ocultar el contenedor si no hay archivo seleccionado
      document.getElementById('imagePreview').style.display = 'none';
    }
  });
</script>