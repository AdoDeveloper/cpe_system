<div class="container p-4">
  <div class="row justify-content-center">
    <h1>Modificar Cliente</h1>
  </div>
  
  <div class="row justify-content-center mt-4">
    <div class="col-md-6">
      
      {{!-- Mostrar errores si existen --}}
      {{#if errors}}
        <div class="alert alert-danger">
          <ul>
            {{#each errors}}
              <li>{{this.msg}}</li>
            {{/each}}
          </ul>
        </div>
      {{/if}}

      {{!-- Formulario para modificar cliente --}}
      <form method="POST" action="/clientes/edit/{{cliente.id}}?_method=PUT" id="clienteForm">

        <div class="form-group">
          <input type="text" class="form-control" name="nombres" placeholder="Nombres" value="{{cliente.nombres}}" required autofocus>
        </div>

        <div class="form-group">
          <input type="text" class="form-control" name="apellidos" placeholder="Apellidos" value="{{cliente.apellidos}}" required>
        </div>

        <div class="form-group">
          <input type="text" class="form-control" name="alias" placeholder="Alias" value="{{cliente.alias}}" required>
        </div>

        <div class="form-group">
          <input type="text" class="form-control" name="telefono" placeholder="Teléfono" value="{{cliente.telefono}}" required>
        </div>

        <div class="form-group">
          <input type="email" class="form-control" name="correo" placeholder="Correo Electrónico" value="{{cliente.correo}}" required>
        </div>

        <div class="form-group">
          <input type="text" class="form-control" name="dui" placeholder="DUI" value="{{cliente.dui}}" required>
        </div>
        
        <div class="form-group">
          <button class="btn btn-primary btn-block" type="submit">Guardar Cambios</button>
        </div>
      </form>

      <!-- Spinner de carga, oculto inicialmente -->
      <div id="loadingSpinner" class="text-center mt-4" style="display: none;">
        <div class="spinner-border" role="status">
          <span class="sr-only">Cargando...</span>
        </div>
        <p>Procesando solicitud...</p>
      </div>
    </div>
  </div>
</div>

<script src="/plugins/sweetalert2/sweetalert2.all.min.js"></script>
<script>
  document.getElementById('clienteForm').addEventListener('submit', function(event) {
    event.preventDefault(); // Prevenir el envío del formulario

    // Mostrar el spinner de SweetAlert2
    Swal.fire({
      title: 'Guardando cambios...',
      text: 'Por favor, espera mientras se procesan los cambios.',
      allowOutsideClick: false,
      didOpen: () => {
        Swal.showLoading();
      }
    });

    // Enviar el formulario después de mostrar el spinner
    this.submit();
  });
</script>
