<div class="container p-4">
    <div class="row justify-content-center">
        <h1>Agregar Nuevo Movimiento</h1>
    </div>

    <div class="row justify-content-center mt-4">
        <div class="col-md-6">
            
            {{!-- Mostrar errores si existen --}}
            {{#if errors}}
                <div class="alert alert-danger">
                    <ul>
                        {{#each errors}}
                            <li>{{this.msg}}</li>
                        {{/each}}
                    </ul>
                </div>
            {{/if}}

            {{!-- Formulario para agregar nuevo movimiento --}}
            <form method="POST" action="/movimientos/new" id="alertFormSave">
                
                <div class="form-group">
                    <label for="tipocc">Tipo de Cuenta Contable</label>
                    <select class="form-control" name="tipocc" required>
                        <option value="" disabled selected>Seleccione el tipo de cuenta</option>
                        {{#each cuentasContables}}
                            <option value="{{this.tipocc}}">{{this.nombre_cuenta}}</option>
                        {{/each}}
                    </select>
                </div>
                
                <div class="form-group">
                    <input type="hidden" class="form-control" name="anio" placeholder="Año" value="{{currentYear}}" required>
                </div>
                
                <div class="form-group">
                    <input type="hidden" class="form-control" name="mes" placeholder="Mes" min="1" max="12" value="{{currentMonth}}" required>
                </div>
                
                <div class="form-group">
                    <label for="monto">Monto</label>
                    <input type="number" step="0.01" class="form-control" name="monto" placeholder="##.##" required>
                </div>
                
                <div class="form-group">
                    <label for="concepto">Concepto</label>
                    <textarea class="form-control" name="concepto" placeholder="Descripción del movimiento" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="clienteId">Cliente (Opcional)</label>
                    <select class="form-control" name="clienteId">
                        <option value="" disabled selected>Seleccione un cliente</option>
                        {{#each clientes}}
                            <option value="{{this.id}}">{{this.nombres}} {{this.apellidos}} (Alias: {{this.alias}})</option>
                        {{/each}}
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="facturaId">Factura (Opcional)</label>
                    <select class="form-control" name="facturaId">
                        <option value="" disabled selected>Seleccione una factura</option>
                        {{#each facturas}}
                            <option value="{{this.id}}">Factura #{{this.numero}} - {{this.observacion}} - Total: ${{this.total}}</option>
                        {{/each}}
                    </select>
                </div>
                
                <div class="form-group row">
                    <div class="col-6 pl-1">
                        <a href="/movimientos" class="btn btn-secondary btn-block">Cancelar</a>
                    </div>
                    <div class="col-6 pr-1">
                       <button class="btn btn-success btn-block" type="submit">Agregar Movimiento</button>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>